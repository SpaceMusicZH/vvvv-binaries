/**************************
***** Compiler Parameters *****
***************************
@P EffectName: ComputeFXEffect
@P   - EffectNodeBase.EffectNodeBaseShader: mixin ApplyAO_Internal_ComputeFX
@P ComputeEffectShader.ThreadNumbers: X:8 Y:8 Z:1
***************************
******  Resources    ******
***************************
@R    SrcWorkingAOTerm_id11 => ApplyAO_Internal_ComputeFX.SrcWorkingAOTerm [Stage: Compute, Slot: (0-0)]
@R    SceneColor_id12 => ApplyAO_Internal_ComputeFX.SceneColor [Stage: Compute, Slot: (1-1)]
@R    OutAOTerm_id13 => ApplyAO_Internal_ComputeFX.OutAOTerm [Stage: Compute, Slot: (0-0)]
***************************
*****     Sources     *****
***************************
@S    ComputeShaderBase => 8f045851eaa4513eb38a704d53889e6d
@S    ApplyAO_Internal_ComputeFX => 21ed7445187fcfccba03907e0316a3cd
***************************
*****     Stages      *****
***************************
@G    Compute => 2bddba410df7fd294e5a8f19bb6f2994
//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// SrcWorkingAOTerm_id11             texture    uint          2d             t0      1 
// SceneColor_id12                   texture  float4          2d             t1      1 
// OutAOTerm_id13                        UAV  float4          2d             u0      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// no Input
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// no Output
cs_5_0
dcl_globalFlags refactoringAllowed
dcl_resource_texture2d (uint,uint,uint,uint) t0
dcl_resource_texture2d (float,float,float,float) t1
dcl_uav_typed_texture2d (float,float,float,float) u0
dcl_input vThreadID.xy
dcl_temps 2
dcl_thread_group 8, 8, 1
//
// Initial variable locations:
//   vThreadGroupID.x <- __input__.GroupId_id0.x; vThreadGroupID.y <- __input__.GroupId_id0.y; vThreadGroupID.z <- __input__.GroupId_id0.z; 
//   vThreadID.x <- __input__.DispatchThreadId_id1.x; vThreadID.y <- __input__.DispatchThreadId_id1.y; vThreadID.z <- __input__.DispatchThreadId_id1.z
//
#line 27 "H:\JHH_SpaceMusic\SpaceMusicZH\vvvv-binaries\vvvv_gamma\log\shader_ComputeFXEffect_707e336a8e82f805905e37b99ffc3a3f.hlsl"
mov r0.xy, vThreadID.xyxx
mov r0.zw, l(0,0,0,0)
ld_indexable(texture2d)(uint,uint,uint,uint) r1.x, r0.xyww, t0.xyzw

#line 28
ld_indexable(texture2d)(float,float,float,float) r0.xyzw, r0.xyzw, t1.xyzw

#line 27
utof r1.x, r1.x
mul r1.x, r1.x, l(0.005882)
log r1.x, r1.x
mul r1.x, r1.x, l(1.500000)
exp r1.x, r1.x
min r1.xyz, r1.xxxx, l(1.000000, 1.000000, 1.000000, 0.000000)  // r1.z <- aoTerm.x

#line 28
mov r1.w, l(1.000000)
mul r0.xyzw, r0.xyzw, r1.xyzw
store_uav_typed u0.xyzw, vThreadID.xyyy, r0.xyzw

#line 43
ret 
// Approximately 14 instruction slots used
***************************
*************************/
struct CS_STREAMS 
{
    uint3 GroupId_id0;
    uint3 DispatchThreadId_id1;
    int ThreadCountX_id7;
    int ThreadCountY_id8;
    int ThreadCountZ_id9;
    uint ThreadCountPerGroup_id5;
    uint3 ThreadGroupCount_id4;
    uint ThreadGroupIndex_id6;
};
struct CS_INPUT 
{
    uint3 GroupId_id0 : SV_GroupID;
    uint3 DispatchThreadId_id1 : SV_DispatchThreadID;
};
cbuffer PerDispatch 
{
    int3 ThreadGroupCountGlobal_id10;
};
Texture2D<uint> SrcWorkingAOTerm_id11;
Texture2D<float4> SceneColor_id12;
RWTexture2D<float4> OutAOTerm_id13;
void Compute_id2(inout CS_STREAMS streams)
{
    uint3 uv = uint3(streams.DispatchThreadId_id1.xy, 0);
    float4 aoTerm = float4(saturate(pow((SrcWorkingAOTerm_id11.Load(uv) / 255.0).xxx * 1.5, 1.5)), 1);
    OutAOTerm_id13[uv.xy] = SceneColor_id12.Load(uv) * aoTerm;
}
[numthreads(8, 8, 1)]
void CSMain(CS_INPUT __input__)
{
    CS_STREAMS streams = (CS_STREAMS)0;
    streams.GroupId_id0 = __input__.GroupId_id0;
    streams.DispatchThreadId_id1 = __input__.DispatchThreadId_id1;
    streams.ThreadCountX_id7 = 8;
    streams.ThreadCountY_id8 = 8;
    streams.ThreadCountZ_id9 = 1;
    streams.ThreadCountPerGroup_id5 = 8 * 8 * 1;
    streams.ThreadGroupCount_id4 = ThreadGroupCountGlobal_id10;
    streams.ThreadGroupIndex_id6 = (streams.GroupId_id0.z * streams.ThreadGroupCount_id4.y + streams.GroupId_id0.y) * streams.ThreadGroupCount_id4.x + streams.GroupId_id0.x;
    Compute_id2(streams);
}
